$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'line',
                marginRight: 130,
                marginBottom: 25
            },
            title: {
                text: "<%= chart_title %>",
                x: -20 //center
            },
            subtitle: {
                text: 'Source: FTA Nexus',
                x: -20
            },
            xAxis: {
                type: 'datetime',
                dateTimeLabelFormats: {
                    hour: '%H:%M'   
                }
            },
            yAxis: [{
                title: {
                    text: 'Temperature (°C)'
                }
            }, {
                title: {
                    text: 'Pressure (mbar)'
                },
                opposite: true,
            }], 
            tooltip: {
                formatter: function() {
                        var d = new Date(this.x)
                        return '<b>'+ this.series.name +'</b><br/>'+
                        d.toLocaleString() +': '+ this.y +'°C';
                }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -10,
                y: 100,
                borderWidth: 0
            },
            series: [{
                name: 'OUT',
                data: <%= temp_values %>,
                pointStart: <%= start_unixtime %>, // Date.UTC(2010, 0, 1),
                pointInterval: 3600 * 1000 // one hour
            }, {
                name: 'PRESS',
                data: <%= press_values %>,
                yAxis: 1,
                pointStart: <%= start_unixtime %>, // Date.UTC(2010, 0, 1),
                pointInterval: 3600 * 1000 // one hour
            }],
        });
    });
    
});